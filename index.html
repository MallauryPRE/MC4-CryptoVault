<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CryptoVault - Chiffrement SÃ©curisÃ©</title>
    <meta name="description"
        content="Application de chiffrement et dÃ©chiffrement de fichiers et messages avec AES-256-GCM et Argon2">
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Argon2 WASM Library -->
    <script src="https://cdn.jsdelivr.net/npm/argon2-browser@1.18.0/dist/argon2-bundled.min.js"></script>
</head>

<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <div class="logo-icon">ğŸ”</div>
                <h1>CryptoVault</h1>
            </div>
            <p class="tagline">AES-256-GCM + Argon2id</p>
        </header>

        <!-- Mode Selector -->
        <div class="mode-selector glass-card">
            <div class="mode-toggle">
                <button class="mode-btn active" data-mode="standard" id="modeStandard">
                    <span class="mode-icon">ğŸ”‘</span>
                    <span>Mode Standard</span>
                </button>
                <button class="mode-btn" data-mode="password" id="modePassword">
                    <span class="mode-icon">ğŸ”’</span>
                    <span>Mode Mot de Passe</span>
                </button>
                <button class="mode-btn" data-mode="deniable" id="modeDeniable">
                    <span class="mode-icon">ğŸ›¡ï¸</span>
                    <span>DÃ©nÃ©gation Plausible</span>
                </button>
            </div>
        </div>

        <!-- Standard Mode: Key Management Section -->
        <section class="key-section glass-card" id="standardModeSection">
            <div class="section-header">
                <h2>ğŸ”‘ Gestion de la ClÃ©</h2>
                <span class="key-status" id="keyStatus">Aucune clÃ©</span>
            </div>
            <div class="key-controls">
                <button class="btn btn-primary" id="generateKeyBtn">
                    <span class="btn-icon">âš¡</span>
                    GÃ©nÃ©rer une clÃ©
                </button>
                <button class="btn btn-secondary" id="exportKeyBtn" disabled>
                    <span class="btn-icon">ğŸ“¤</span>
                    Exporter
                </button>
                <button class="btn btn-secondary" id="importKeyBtn">
                    <span class="btn-icon">ğŸ“¥</span>
                    Importer
                </button>
            </div>
            <div class="key-display hidden" id="keyDisplay">
                <label>ClÃ© (Base64):</label>
                <div class="key-value-container">
                    <input type="text" id="keyValue" readonly>
                    <button class="btn btn-icon-only" id="copyKeyBtn" title="Copier">ğŸ“‹</button>
                </div>
            </div>
            <div class="key-import hidden" id="keyImport">
                <label>Importer une clÃ© (Base64):</label>
                <div class="key-value-container">
                    <input type="text" id="importKeyValue" placeholder="Collez votre clÃ© ici...">
                    <button class="btn btn-primary" id="confirmImportBtn">Importer</button>
                </div>
            </div>
        </section>

        <!-- Password Mode Section -->
        <section class="password-section glass-card hidden" id="passwordModeSection">
            <div class="section-header">
                <h2>ğŸ”’ Mode Mot de Passe</h2>
                <span class="badge badge-info">Argon2id</span>
            </div>
            <p class="section-description">
                La clÃ© de chiffrement est dÃ©rivÃ©e de votre mot de passe via Argon2id (rÃ©sistant aux attaques GPU/ASIC).
            </p>
            <div class="form-group">
                <label for="passwordInput">Mot de passe:</label>
                <div class="password-input-container">
                    <input type="password" id="passwordInput" placeholder="Entrez votre mot de passe...">
                    <button class="btn btn-icon-only toggle-password" id="togglePassword"
                        title="Afficher/Masquer">ğŸ‘ï¸</button>
                </div>
            </div>
            <div class="password-strength" id="passwordStrength">
                <div class="strength-bar">
                    <div class="strength-fill" id="strengthFill"></div>
                </div>
                <span class="strength-text" id="strengthText">Force du mot de passe</span>
            </div>
        </section>

        <!-- Deniable Mode Section -->
        <section class="deniable-section glass-card hidden" id="deniableModeSection">
            <div class="section-header">
                <h2>ğŸ›¡ï¸ DÃ©nÃ©gation Plausible</h2>
                <span class="badge badge-warning">AvancÃ©</span>
            </div>
            <div class="deniable-info">
                <div class="info-box">
                    <p>âš ï¸ <strong>Comment Ã§a marche:</strong></p>
                    <ul>
                        <li>CrÃ©ez deux espaces chiffrÃ©s: <strong>rÃ©el</strong> et <strong>leurre</strong></li>
                        <li>Le mot de passe <strong>rÃ©el</strong> rÃ©vÃ¨le vos vraies donnÃ©es</li>
                        <li>Le mot de passe <strong>leurre</strong> rÃ©vÃ¨le des donnÃ©es factices</li>
                        <li>Impossible de prouver l'existence du second espace</li>
                    </ul>
                </div>
            </div>

            <!-- Deniable Creation -->
            <div class="deniable-create" id="deniableCreate">
                <h3>CrÃ©er un conteneur deniable</h3>
                <div class="dual-password-grid">
                    <div class="password-group">
                        <label for="realPassword">ğŸ” Mot de passe RÃ‰EL:</label>
                        <input type="password" id="realPassword" placeholder="Vos vraies donnÃ©es...">
                    </div>
                    <div class="password-group">
                        <label for="decoyPassword">ğŸ­ Mot de passe LEURRE:</label>
                        <input type="password" id="decoyPassword" placeholder="DonnÃ©es factices...">
                    </div>
                </div>
                <div class="dual-data-grid">
                    <div class="data-group">
                        <label for="realData">ğŸ“„ DonnÃ©es RÃ‰ELLES:</label>
                        <textarea id="realData" placeholder="Vos vraies donnÃ©es secrÃ¨tes..." rows="3"></textarea>
                    </div>
                    <div class="data-group">
                        <label for="decoyData">ğŸ“„ DonnÃ©es LEURRE:</label>
                        <textarea id="decoyData" placeholder="DonnÃ©es Ã  montrer sous contrainte..." rows="3"></textarea>
                    </div>
                </div>
                <button class="btn btn-primary btn-full" id="createDeniableBtn">
                    <span class="btn-icon">ğŸ›¡ï¸</span>
                    CrÃ©er le conteneur deniable
                </button>
                <div class="result-group hidden" id="deniableResult">
                    <label>Conteneur chiffrÃ©:</label>
                    <div class="result-container">
                        <textarea id="deniableOutput" readonly rows="3"></textarea>
                        <button class="btn btn-icon-only copy-btn" data-target="deniableOutput"
                            title="Copier">ğŸ“‹</button>
                    </div>
                </div>
            </div>

            <!-- Deniable Open -->
            <div class="deniable-open">
                <h3>Ouvrir un conteneur</h3>
                <div class="form-group">
                    <label for="deniableInput">Conteneur chiffrÃ©:</label>
                    <textarea id="deniableInput" placeholder="Collez le conteneur chiffrÃ©..." rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label for="openPassword">Mot de passe:</label>
                    <input type="password" id="openPassword" placeholder="Mot de passe rÃ©el ou leurre...">
                </div>
                <button class="btn btn-primary btn-full" id="openDeniableBtn">
                    <span class="btn-icon">ğŸ”“</span>
                    Ouvrir le conteneur
                </button>
                <div class="result-group hidden" id="openDeniableResult">
                    <label>DonnÃ©es dÃ©chiffrÃ©es:</label>
                    <div class="result-container">
                        <textarea id="openDeniableOutput" readonly rows="3"></textarea>
                        <button class="btn btn-icon-only copy-btn" data-target="openDeniableOutput"
                            title="Copier">ğŸ“‹</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Tab Navigation -->
        <nav class="tabs" id="mainTabs">
            <button class="tab active" data-tab="messages">
                <span class="tab-icon">ğŸ’¬</span>
                Messages
            </button>
            <button class="tab" data-tab="files">
                <span class="tab-icon">ğŸ“</span>
                Fichiers
            </button>
        </nav>

        <!-- Messages Tab -->
        <section class="tab-content active" id="messagesTab">
            <div class="crypto-grid">
                <!-- Encrypt Message -->
                <div class="crypto-card glass-card">
                    <h3>ğŸ”’ Chiffrer un message</h3>
                    <div class="form-group">
                        <label for="plaintext">Message Ã  chiffrer:</label>
                        <textarea id="plaintext" placeholder="Entrez votre message secret..." rows="4"></textarea>
                    </div>
                    <button class="btn btn-primary btn-full" id="encryptMsgBtn">
                        <span class="btn-icon">ğŸ”</span>
                        Chiffrer
                    </button>
                    <div class="result-group hidden" id="encryptResult">
                        <label>Message chiffrÃ©:</label>
                        <div class="result-container">
                            <textarea id="ciphertext" readonly rows="3"></textarea>
                            <button class="btn btn-icon-only copy-btn" data-target="ciphertext"
                                title="Copier">ğŸ“‹</button>
                        </div>
                    </div>
                </div>

                <!-- Decrypt Message -->
                <div class="crypto-card glass-card">
                    <h3>ğŸ”“ DÃ©chiffrer un message</h3>
                    <div class="form-group">
                        <label for="ciphertextInput">Message chiffrÃ©:</label>
                        <textarea id="ciphertextInput" placeholder="Collez le message chiffrÃ©..." rows="4"></textarea>
                    </div>
                    <button class="btn btn-primary btn-full" id="decryptMsgBtn">
                        <span class="btn-icon">ğŸ”“</span>
                        DÃ©chiffrer
                    </button>
                    <div class="result-group hidden" id="decryptResult">
                        <label>Message dÃ©chiffrÃ©:</label>
                        <div class="result-container">
                            <textarea id="decryptedText" readonly rows="3"></textarea>
                            <button class="btn btn-icon-only copy-btn" data-target="decryptedText"
                                title="Copier">ğŸ“‹</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Files Tab -->
        <section class="tab-content" id="filesTab">
            <div class="crypto-grid">
                <!-- Encrypt File -->
                <div class="crypto-card glass-card">
                    <h3>ğŸ”’ Chiffrer un fichier</h3>
                    <div class="file-drop-zone" id="encryptDropZone">
                        <div class="drop-icon">ğŸ“„</div>
                        <p>Glissez un fichier ici ou</p>
                        <label class="file-input-label">
                            <input type="file" id="fileToEncrypt" hidden>
                            <span class="btn btn-secondary">Parcourir</span>
                        </label>
                        <p class="file-name" id="encryptFileName"></p>
                    </div>
                    <button class="btn btn-primary btn-full" id="encryptFileBtn" disabled>
                        <span class="btn-icon">ğŸ”</span>
                        Chiffrer le fichier
                    </button>
                    <div class="result-group hidden" id="encryptFileResult">
                        <p class="success-msg">âœ… Fichier chiffrÃ© avec succÃ¨s!</p>
                        <button class="btn btn-secondary btn-full" id="downloadEncryptedBtn">
                            <span class="btn-icon">ğŸ“¥</span>
                            TÃ©lÃ©charger (.encrypted)
                        </button>
                    </div>
                </div>

                <!-- Decrypt File -->
                <div class="crypto-card glass-card">
                    <h3>ğŸ”“ DÃ©chiffrer un fichier</h3>
                    <div class="file-drop-zone" id="decryptDropZone">
                        <div class="drop-icon">ğŸ”</div>
                        <p>Glissez un fichier .encrypted ici ou</p>
                        <label class="file-input-label">
                            <input type="file" id="fileToDecrypt" accept=".encrypted" hidden>
                            <span class="btn btn-secondary">Parcourir</span>
                        </label>
                        <p class="file-name" id="decryptFileName"></p>
                    </div>
                    <button class="btn btn-primary btn-full" id="decryptFileBtn" disabled>
                        <span class="btn-icon">ğŸ”“</span>
                        DÃ©chiffrer le fichier
                    </button>
                    <div class="result-group hidden" id="decryptFileResult">
                        <p class="success-msg">âœ… Fichier dÃ©chiffrÃ© avec succÃ¨s!</p>
                        <button class="btn btn-secondary btn-full" id="downloadDecryptedBtn">
                            <span class="btn-icon">ğŸ“¥</span>
                            TÃ©lÃ©charger le fichier original
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Notifications -->
        <div class="notification hidden" id="notification">
            <span class="notification-icon"></span>
            <span class="notification-message"></span>
        </div>

        <!-- Loading Overlay -->
        <div class="loading-overlay hidden" id="loadingOverlay">
            <div class="loading-spinner"></div>
            <p>DÃ©rivation de clÃ© en cours...</p>
        </div>

        <!-- Footer with Easter Egg Hint -->
        <footer class="easter-egg-hint">
            <p>Easter Egg: <code>â†‘ â†‘ â†“ â†“ â† â†’ â† â†’ B A</code></p>
        </footer>
    </div>

    <script src="crypto.js"></script>
    <script src="app.js"></script>
</body>

</html>